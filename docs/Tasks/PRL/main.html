<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Resting-state Task (EC+EO)" href="../Rest/main.html" /><link rel="prev" title="N-Back Task" href="../nback/main.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.08.06 -->
        <title>Probabilistic Reversal Learning (PRL) Task - TaskBeacon</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=8c6593db" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">TaskBeacon</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/logo-nobg.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-cta entries-box">
  <p><strong>Quick Links</strong></p>
  <ul style="list-style: none; padding-left: 0;">
    <li><a href="https://taskbeacon.github.io/">Taskbeacon Home</a></li>
    <!-- <li><a href="https://taskbeacon.github.io/taps.html">TAPS Format</a></li>
    <li><a href="https://taskbeacon.github.io/text2voice.html">Text-to-Voice</a></li>
    <li><a href="https://taskbeacon.github.io/localization.html">Localization</a></li>
    <li><a href="https://taskbeacon.github.io/versioning.html">Task Management</a></li> -->
    <li><a href="https://taskbeacon.github.io/task-registry/">Task Library Home</a></li>
  </ul>
</div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Task Library</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../AX-CPT/main.html">AX-CPT Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ANT/main.html">Attention Network Test (ANT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EmoDot/main.html">Emotional Dot-Probe Task (EmoDot)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Flanker/main.html">Flanker Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GO-NoGO/main.html">Go/No-Go Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MID/main.html">Monetary Incentive Delay (MID) Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Movie/main.html">Movie Watching Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nback/main.html">N-Back Task</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Probabilistic Reversal Learning (PRL) Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rest/main.html">Resting-state Task (EC+EO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Simon/main.html">Simon Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SST/main.html">Stop-Signal Task (SST)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Stroop/main.html">Stroop Task</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/TaskBeacon/task-registry/blob/main/source/Tasks/PRL/main.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/TaskBeacon/task-registry/edit/main/source/Tasks/PRL/main.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="probabilistic-reversal-learning-prl-task">
<h1>Probabilistic Reversal Learning (PRL) Task<a class="headerlink" href="#probabilistic-reversal-learning-prl-task" title="Link to this heading">¶</a></h1>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>Probabilistic Reversal Learning (PRL) Task</p></td>
</tr>
<tr class="row-odd"><td><p>Version</p></td>
<td><p>main (1.0)</p></td>
</tr>
<tr class="row-even"><td><p>URL / Repository</p></td>
<td><p>https://github.com/TaskBeacon/PRL</p></td>
</tr>
<tr class="row-odd"><td><p>Short Description</p></td>
<td><p>A task where participants learn stimulus-reward associations that reverse unpredictably.</p></td>
</tr>
<tr class="row-even"><td><p>Created By</p></td>
<td><p>Zhipeng Cao (zhipeng30&#64;foxmail.com)</p></td>
</tr>
<tr class="row-odd"><td><p>Date Updated</p></td>
<td><p>2025-07-23</p></td>
</tr>
<tr class="row-even"><td><p>PsyFlow Version</p></td>
<td><p>0.1.0</p></td>
</tr>
<tr class="row-odd"><td><p>PsychoPy Version</p></td>
<td><p>2025.1.1</p></td>
</tr>
<tr class="row-even"><td><p>Modality</p></td>
<td><p>Behavior/EEG</p></td>
</tr>
<tr class="row-odd"><td><p>Language</p></td>
<td><p>Chinese</p></td>
</tr>
<tr class="row-even"><td><p>Voice Name</p></td>
<td><p>zh-CN-YunyangNeural</p></td>
</tr>
</tbody>
</table>
</div>
<section id="task-overview">
<h2>1. Task Overview<a class="headerlink" href="#task-overview" title="Link to this heading">¶</a></h2>
<p>This task implements a probabilistic reversal learning paradigm designed for EEG studies. Participants are presented with two visual stimuli (images) and must learn which one has a higher probability of yielding a reward (+10 points). The reward contingencies are not fixed; after a certain number of correct choices, the probabilities reverse, requiring participants to adapt their strategy. The goal is to maximize the total score by tracking these changes and consistently choosing the more advantageous stimulus. The task consists of multiple blocks, and within each block, a new pair of stimuli is used.</p>
</section>
<section id="task-flow">
<h2>2. Task Flow<a class="headerlink" href="#task-flow" title="Link to this heading">¶</a></h2>
<section id="block-level-flow-main-py">
<h3>Block-Level Flow (<code class="docutils literal notranslate"><span class="pre">main.py</span></code>)<a class="headerlink" href="#block-level-flow-main-py" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Step</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1. <strong>Initialization</strong></p></td>
<td><p>Load configuration, collect subject information, and set up the PsychoPy window, keyboard, and trigger sender.</p></td>
</tr>
<tr class="row-odd"><td><p>2. <strong>Instructions</strong></p></td>
<td><p>Display the task instructions text and play the corresponding voiceover. Wait for a spacebar press to continue.</p></td>
</tr>
<tr class="row-even"><td><p>3. <strong>Block Loop</strong></p></td>
<td><p>Iterate through the total number of blocks (<code class="docutils literal notranslate"><span class="pre">total_blocks</span></code>: 6).</p></td>
</tr>
<tr class="row-odd"><td><p>4. <strong>Countdown</strong></p></td>
<td><p>Display a 3-second countdown before each block begins.</p></td>
</tr>
<tr class="row-even"><td><p>5. <strong>Stimulus Setup</strong></p></td>
<td><p>For each block, select a new pair of images (<code class="docutils literal notranslate"><span class="pre">stima</span></code> and <code class="docutils literal notranslate"><span class="pre">stimb</span></code>) from the <code class="docutils literal notranslate"><span class="pre">assets</span></code> folder.</p></td>
</tr>
<tr class="row-odd"><td><p>6. <strong>Controller Reset</strong></p></td>
<td><p>A new <code class="docutils literal notranslate"><span class="pre">Controller</span></code> instance is created for each block, resetting the learning and reversal logic.</p></td>
</tr>
<tr class="row-even"><td><p>7. <strong>Run Trials</strong></p></td>
<td><p>Execute the trial-level logic (<code class="docutils literal notranslate"><span class="pre">run_trial.py</span></code>) for the number of trials in the block (<code class="docutils literal notranslate"><span class="pre">trial_per_block</span></code>: 40).</p></td>
</tr>
<tr class="row-odd"><td><p>8. <strong>Block Break</strong></p></td>
<td><p>After each block, display a break screen showing the score for that block. Wait for a spacebar press to proceed to the next block.</p></td>
</tr>
<tr class="row-even"><td><p>9. <strong>End of Task</strong></p></td>
<td><p>After all blocks are completed, display a “good bye” screen with the total score.</p></td>
</tr>
<tr class="row-odd"><td><p>10. <strong>Data Saving</strong></p></td>
<td><p>Save all recorded data to a CSV file.</p></td>
</tr>
<tr class="row-even"><td><p>11. <strong>Cleanup</strong></p></td>
<td><p>Close the serial port and quit the PsychoPy application.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="trial-level-flow-run-trial-py">
<h3>Trial-Level Flow (<code class="docutils literal notranslate"><span class="pre">run_trial.py</span></code>)<a class="headerlink" href="#trial-level-flow-run-trial-py" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Step</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1. <strong>Fixation</strong></p></td>
<td><p>A fixation cross (<code class="docutils literal notranslate"><span class="pre">+</span></code>) is displayed for a random duration between 0.6 and 0.8 seconds.</p></td>
</tr>
<tr class="row-odd"><td><p>2. <strong>Cue Presentation</strong></p></td>
<td><p>Two images (<code class="docutils literal notranslate"><span class="pre">stima</span></code> and <code class="docutils literal notranslate"><span class="pre">stimb</span></code>) are presented on the left and right sides of the screen. The positions are determined by the <code class="docutils literal notranslate"><span class="pre">condition</span></code> (<code class="docutils literal notranslate"><span class="pre">AB</span></code> or <code class="docutils literal notranslate"><span class="pre">BA</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>3. <strong>Response Collection</strong></p></td>
<td><p>The participant has 1.5 seconds (<code class="docutils literal notranslate"><span class="pre">cue_duration</span></code>) to choose one of the images by pressing ‘f’ for the left or ‘j’ for the right. A highlight box appears around the selected image.</p></td>
</tr>
<tr class="row-odd"><td><p>4. <strong>Feedback Logic</strong></p></td>
<td><p>The outcome is determined probabilistically. If the correct stimulus is chosen, there is an 80% (<code class="docutils literal notranslate"><span class="pre">win_prob</span></code>) chance of winning +10 points and a 20% chance of losing 10 points. If the incorrect stimulus is chosen, the probabilities are reversed. No response results in a loss of 10 points.</p></td>
</tr>
<tr class="row-even"><td><p>5. <strong>Blank Screen</strong></p></td>
<td><p>A blank screen is shown for a random duration between 0.4 and 0.6 seconds.</p></td>
</tr>
<tr class="row-odd"><td><p>6. <strong>Feedback Display</strong></p></td>
<td><p>The feedback (“+10分”, “-10分”, or “未反应：-10分”) is displayed for 0.8 seconds (<code class="docutils literal notranslate"><span class="pre">feedback_duration</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>7. <strong>Controller Update</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Controller</span></code> is updated with the outcome of the trial (<code class="docutils literal notranslate"><span class="pre">hit</span></code> or <code class="docutils literal notranslate"><span class="pre">miss</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="controller-logic-utils-py">
<h3>Controller Logic (<code class="docutils literal notranslate"><span class="pre">utils.py</span></code>)<a class="headerlink" href="#controller-logic-utils-py" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Reversal Mechanism</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Controller</span></code> uses a sliding window approach to determine when to reverse the stimulus-reward contingencies.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Sliding Window</strong></p></td>
<td><p>The controller tracks the last 10 trials (<code class="docutils literal notranslate"><span class="pre">sliding_window</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><strong>Reversal Trigger</strong></p></td>
<td><p>If the participant correctly identifies the higher-probability stimulus in at least 9 of the last 10 trials (<code class="docutils literal notranslate"><span class="pre">sliding_window_hits</span></code>), the reward probabilities are reversed.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>State Tracking</strong></p></td>
<td><p>The controller tracks the <code class="docutils literal notranslate"><span class="pre">current_correct</span></code> stimulus (‘stima’ or ‘stimb’), the <code class="docutils literal notranslate"><span class="pre">reversal_count</span></code>, and the history of hits within the current phase (<code class="docutils literal notranslate"><span class="pre">phase_hits</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><strong>Win Probability</strong></p></td>
<td><p>The initial win probability is 80% (<code class="docutils literal notranslate"><span class="pre">win_prob</span></code>). After the first reversal, it changes to 90% (<code class="docutils literal notranslate"><span class="pre">rev_win_prob</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="configuration-summary">
<h2>3. Configuration Summary<a class="headerlink" href="#configuration-summary" title="Link to this heading">¶</a></h2>
<section id="a-subject-info">
<h3>a. Subject Info<a class="headerlink" href="#a-subject-info" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subject_id</span></code></p></td>
<td><p>The unique identifier for the subject (3 digits, 101-999).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">subname</span></code></p></td>
<td><p>The subject’s name in Pinyin.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">age</span></code></p></td>
<td><p>The subject’s age (5-60).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gender</span></code></p></td>
<td><p>The subject’s gender (‘Male’ or ‘Female’).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="b-window-settings">
<h3>b. Window Settings<a class="headerlink" href="#b-window-settings" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td><p>[1920, 1080]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">units</span></code></p></td>
<td><p>deg</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">screen</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bg_color</span></code></p></td>
<td><p>gray</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fullscreen</span></code></p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">monitor_width_cm</span></code></p></td>
<td><p>60</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">monitor_distance_cm</span></code></p></td>
<td><p>72</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="c-stimuli">
<h3>c. Stimuli<a class="headerlink" href="#c-stimuli" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fixation</span></code></p></td>
<td><p>text</p></td>
<td><p>A white ‘+’ symbol.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">win_feedback</span></code></p></td>
<td><p>text</p></td>
<td><p>“+10分” in white.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lose_feedback</span></code></p></td>
<td><p>text</p></td>
<td><p>“-10分” in white.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">no_response_feedback</span></code></p></td>
<td><p>text</p></td>
<td><p>“未反应：-10分” in white.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">blank</span></code></p></td>
<td><p>text</p></td>
<td><p>An empty text stimulus.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">stima</span></code></p></td>
<td><p>image</p></td>
<td><p>The first image in a pair, with a size of [5, 5] degrees.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stimb</span></code></p></td>
<td><p>image</p></td>
<td><p>The second image in a pair, with a size of [5, 5] degrees.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">highlight_left</span></code></p></td>
<td><p>rect</p></td>
<td><p>A white rectangle to highlight the left stimulus.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">highlight_right</span></code></p></td>
<td><p>rect</p></td>
<td><p>A white rectangle to highlight the right stimulus.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">block_break</span></code></p></td>
<td><p>text</p></td>
<td><p>A multi-line text displaying the score at the end of a block.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">instruction_text</span></code></p></td>
<td><p>textbox</p></td>
<td><p>The initial instructions for the task.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">good_bye</span></code></p></td>
<td><p>text</p></td>
<td><p>The final message at the end of the experiment, showing the total score.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="d-timing">
<h3>d. Timing<a class="headerlink" href="#d-timing" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Phase</p></th>
<th class="head"><p>Duration (seconds)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fixation_duration</span></code></p></td>
<td><p>[0.6, 0.8] (randomized)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cue_duration</span></code></p></td>
<td><p>1.5</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">feedback_duration</span></code></p></td>
<td><p>0.8</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">blank_duration</span></code></p></td>
<td><p>[0.4, 0.6] (randomized)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="e-triggers">
<h3>e. Triggers<a class="headerlink" href="#e-triggers" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Event</p></th>
<th class="head"><p>Code</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exp_onset</span></code></p></td>
<td><p>98</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exp_end</span></code></p></td>
<td><p>99</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">block_onset</span></code></p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">block_end</span></code></p></td>
<td><p>101</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fixation_onset</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cue_onset</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key_press</span></code></p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">no_response</span></code></p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">win_feedback_onset</span></code></p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lose_feedback_onset</span></code></p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">no_response_feedback_onset</span></code></p></td>
<td><p>7</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="f-adaptive-controller">
<h3>f. Adaptive Controller<a class="headerlink" href="#f-adaptive-controller" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">win_prob</span></code></p></td>
<td><p>0.8</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rev_win_prob</span></code></p></td>
<td><p>0.9</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sliding_window</span></code></p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sliding_window_hits</span></code></p></td>
<td><p>9</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="methods-for-academic-publication">
<h2>4. Methods (for academic publication)<a class="headerlink" href="#methods-for-academic-publication" title="Link to this heading">¶</a></h2>
<p>In this experiment, participants performed a probabilistic reversal learning task. Each trial began with a central fixation cross, displayed for a variable duration of 600 to 800 ms. Subsequently, two distinct images were presented simultaneously on the left and right sides of the screen for 1500 ms. Participants were instructed to select one of the two images by pressing the ‘f’ key for the left image or the ‘j’ key for the right image. Following their response, a blank screen was shown for 400 to 600 ms, after which feedback was provided for 800 ms.</p>
<p>The task was structured into 6 blocks of 40 trials each. Within each block, one of the two images was designated as the “correct” stimulus, associated with an 80% probability of reward (+10 points) and a 20% probability of punishment (-10 points). The “incorrect” stimulus had the inverse probabilities. The reward contingencies were subject to reversal based on the participant’s performance. A reversal was triggered when the participant chose the correct stimulus in at least 9 of the last 10 trials. Upon reversal, the previously “incorrect” stimulus became the “correct” one, and its associated win probability was increased to 90% for the remainder of the block to facilitate the learning of the new rule. This design allows for the examination of cognitive flexibility and reinforcement learning under changing environmental conditions.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../Rest/main.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Resting-state Task (EC+EO)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../nback/main.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">N-Back Task</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Zhipeng Cao
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Probabilistic Reversal Learning (PRL) Task</a><ul>
<li><a class="reference internal" href="#task-overview">1. Task Overview</a></li>
<li><a class="reference internal" href="#task-flow">2. Task Flow</a><ul>
<li><a class="reference internal" href="#block-level-flow-main-py">Block-Level Flow (<code class="docutils literal notranslate"><span class="pre">main.py</span></code>)</a></li>
<li><a class="reference internal" href="#trial-level-flow-run-trial-py">Trial-Level Flow (<code class="docutils literal notranslate"><span class="pre">run_trial.py</span></code>)</a></li>
<li><a class="reference internal" href="#controller-logic-utils-py">Controller Logic (<code class="docutils literal notranslate"><span class="pre">utils.py</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-summary">3. Configuration Summary</a><ul>
<li><a class="reference internal" href="#a-subject-info">a. Subject Info</a></li>
<li><a class="reference internal" href="#b-window-settings">b. Window Settings</a></li>
<li><a class="reference internal" href="#c-stimuli">c. Stimuli</a></li>
<li><a class="reference internal" href="#d-timing">d. Timing</a></li>
<li><a class="reference internal" href="#e-triggers">e. Triggers</a></li>
<li><a class="reference internal" href="#f-adaptive-controller">f. Adaptive Controller</a></li>
</ul>
</li>
<li><a class="reference internal" href="#methods-for-academic-publication">4. Methods (for academic publication)</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>