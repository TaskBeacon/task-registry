{% extends "furo/sidebar/toc.html" %}

{% block sidebar_secondary %}
  {{ super() }}

  {# Custom info panel injected below the ToC tree #}
  {% if task_meta %}
    <div class="task-meta-box" style="margin-top: 1rem; padding: 0.75rem; font-size: 0.85em;
         border-left: 3px solid var(--color-brand-primary);
         background: var(--color-background-secondary);">
      <p><strong>{{ task_meta.get("name", pagename) }}</strong></p>
      {% for key, label in [
            ("version", "Version"),
            ("created_by", "Author"),
            ("date_created", "Created"),
            ("psyflow_version", "psyflow-ver"),
            ("psychopy_version", "psychopy-ver")] %}
        {% if task_meta.get(key) %}
          <p><strong>{{ label }}:</strong> {{ task_meta[key] }}</p>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
